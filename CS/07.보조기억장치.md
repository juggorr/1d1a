# 7-1 다양한 보조기억장치

### 하드 디스크 vs 플래시 메모리

## 하드 디스크

자기적인 방식으로 데이터 저장 = 자기 디스크(magnetic disk)

#### 하드디스크의 구성 요소

![img](https://t1.daumcdn.net/cafeattach/1ST1Z/eab8f57ca765c63157633bea234ef823f57dbfc9)

- actuator arm = 디스크 암 = 헤드 암

- RPM = 스핀들이 플래터를 돌리는 속도 (분당 회전 수)

#### 하드디스크의 저장 공간

![Cylinder-head-sector - Wikipedia](https://upload.wikimedia.org/wikipedia/commons/thumb/4/41/Hard_drive_geometry_-_English_-_2019-05-30.svg/550px-Hard_drive_geometry_-_English_-_2019-05-30.svg.png)

- 섹터 = 데이터 저장의 최소 단위(512바이트 ~ 4096바이트)

- 트랙 = 하나의 원

- 실린더 = 같은 위치의 원들을 연결한 원통 형태의 공간
  - 연속된 정보를 한 실린더에 저장해 arm이 이동하지 않고 데이터에 접근할 수 있도록 함

#### 데이터에 접근하는 시간

![IOPING – DBA DIARY](https://dbadiaryy.files.wordpress.com/2018/01/seek.jpg)

- 탐색 시간 = 데이터가 저장된 트랙으로 헤드를 이동 시키는 시간
  - single-head disk의 경우에만 필요한 시간 = movable-head disk
  - multiple-head disk의 경우 트랙마다 헤드가 있어 소요되지 않는다 = fixed-head disk
- 회전 지연 = 헤드 위치에 데이터가 오도록 플래터를 돌리는 시간
- 전송 시간 = 하드디스크 & 컴퓨터 간에 데이터를 전송하는 시간

*탐색시간, 회전 지연을 줄이기 위해서는*

1. RPM을 높여서 빠르게 돌린다
2. 참조 지역성을 활용해 유사한 데이터들을 가까운 곳에 위치 시킨다

---

## 플래시 메모리

전기적으로 데이터를 읽고 쓰는 반도체 기반 저장장치

*NAND 연산 vs NOR 연산*

![image-20221224033344711](C:\Users\juggo\AppData\Roaming\Typora\typora-user-images\image-20221224033344711.png)![image-20221224033555179](C:\Users\juggo\AppData\Roaming\Typora\typora-user-images\image-20221224033555179.png)

- AND, OR로는 NOR, NAND를 만들수 없음.
- NAND, NOR는 조합을 시키면 모든 Gate를 만들수 있음 = universal gates
- NAND의 가격이 더 싸 일반적으로 많이 사용됨

#### 셀의 저장 용량에 따른 플래시 메모리 분류

![img](https://blog.kakaocdn.net/dn/qRpjk/btrb8TI47a6/ZroQbSxgrkkKSskXoSHEX1/img.jpg)

![image-20221224034346444](C:\Users\juggo\AppData\Roaming\Typora\typora-user-images\image-20221224034346444.png)

#### 플래시 메모리의 단위

![Flash memory hierarchy](http://jamiepacker.eu/wp-content/uploads/2019/05/hierarchy-1024x789.png)

셀 => 페이지 => 블록 => 플레인 => 다이

- 페이지 = 읽기 & 쓰기의 최소 단위
  - Free
    - 데이터가 없어 새로운 데이터가 저장 가능한 상태
  - Valid
    - 유효한 데이터를 저장한 상태
  - Invalid
    - 유효하지 않은 데이터를 저장한 상태
- 블록 = 삭제의 최소 단위
- 가비지 컬렉션
  - 삭제를 페이지 단위로 할 수 없기 때문에
  - 유효한 페이지들만 새로운 블록으로 복사 후 기존 블록 삭제
  - Invalid로 인해 발생하는 용량 낭비를 해결할 수 있음

---

---

# 7-2 RAID

Redundant Array of Independent / Inexpensive Disks = 독립 / 저렴한 디스크들의 중복 배열

- 성능 or 데이터의 안정성을 위해 여러개의 '물리적' 보조기억장치를 하나의 '논리적' 보조기억장치처럼 사용
- 데이터를 어떤 사이즈로 나눌지 stripe size 지정 가능

#### RAID 0

![image-20221224042145428](C:\Users\juggo\AppData\Roaming\Typora\typora-user-images\image-20221224042145428.png)

- 입출력 속도 향상
- 저장된 정보가 안전하지 않음

#### RAID 1

![image-20221224042424032](C:\Users\juggo\AppData\Roaming\Typora\typora-user-images\image-20221224042424032.png)

- 미러링을 통해 완전한 복사본 생성
- 쓰기 속도가 느림
- 복사본의 용량만큼 하드를 사용할 수 없음
- 백업, 복구가 매우 쉽다는 장점

#### RAID 4

![image-20221224042542316](C:\Users\juggo\AppData\Roaming\Typora\typora-user-images\image-20221224042542316.png)

- '패리티 비트'를 활용하여 오류 복구 가능
  - '패리티 비트'는 엄밀히는 오류 검출용 정보
  - 하지만 RAID에서는 오류 복구가 가능
- 하드 하나에 패리티 정보를 저장해서 백업 가능
- 패리티 정보를 담는 하드에서 병목현상 발생하는 단점

#### RAID 5

![image-20221224042745574](C:\Users\juggo\AppData\Roaming\Typora\typora-user-images\image-20221224042745574.png)

- RAID4에서 발생하는 병목 현상 완화 가능
- 

#### RAID 6

![image-20221224042814220](C:\Users\juggo\AppData\Roaming\Typora\typora-user-images\image-20221224042814220.png)

- RAID 5보다 안전하다는 장점
- RAID 5보다 쓰기 속도가 느리다는 단점

*Nested RAID*

*여러 RAID 방식을 혼합한 RAID*

*ex) 0과 1을 혼합한 RAID 10 or RAID 01*  

![img](https://static.thegeekstuff.com/wp-content/uploads/2011/10/raid10-6disks.png)

![img](https://static.thegeekstuff.com/wp-content/uploads/2011/10/raid01-6disks.png)

- fault tolerance level에서 가장 큰 차이를 갖는다
  - RAID 01은 서로 다른 그룹에서 2개의 disk가망가지면 RAID01이 기능하지 않는다
    - disk1과 disk4가 망가질 경우 작동 x
  - RAID 10은 서로 다른 그룹에서 3개의 disk가 망가져도 정상적으로 기능한다
    - disk1, 3, 5가 망가지더라도 정상적으로 작동